# 一、项目开发规范

代码缩进：2

Web标准：结构（HTML），表现（CSS），行为（Javascript）

1 开发工具：

编辑器：vscode，微信开发者工具，HBuildX，代码缩进2个空格

vscode快捷键

```
！+  tab：生成基本骨架
ctrl + + ctrl + -：放大缩小字体
标签名 + tab或者回车：生成双标签
标签名*n + tab或者回车：生成n个相同双标签
鼠标定到某行可以只复制一行
鼠标定到某行，ctrl  +  /：注释和取消注释当前行
标签>标签 + tab：生成包含     标签+标签 + tab：生成并列
标签名.类名 + tab：生成该类名的标签，不加标签默认为div
标签名#id名 + tab：生成该id名的标签，不加标签默认为div
.类名$*n：生成连续类名      标签名{文本}：生成包含文本的标签，文本为$则生成连续数字
CSS可以缩写+tab生成                shift+alt+F：格式化代码
```

其他：浏览器，snipaster，phontoshop，cmder，marktext

vue调试工具：vue.js devtools

手机与电脑连同一个wifi可访问localhost

2 命名：

HTML本身没有驼峰标识，脚手架才会有

* 无驼峰标识的情况下，HTML，CSS，组件，以xxx-yyy命名

* 有驼峰标识情况下，均使用驼峰命名法：变量/函数/对象小驼峰，构造函数/类/接口/组件/大驼峰

* 子组件以views组件名开头，hook函数useXXX

3 目录结构

4 页面布局

（1）HTML,CSS代码结构

* HTML尽量用语义化标签替代div

* css由于带有初始样式且各浏览器的样式有可能不同，所以需要初始化

* css属性按规范的顺序书写，css3中属性值小数0.5可写.5

（2）总体布局

PC端

* 普通页面，header+居中版心+footer，header和footer与浏览器同宽

* 后台管理系统，上+下（左侧导航+右侧内容）

移动端：

* 限制屏幕缩放的最大与最小宽度

* 顶部导航+滚动（单滚动或左分类+有内容）+tabBar，开发时页面分类tabBar页面和非tabBar页面，导航栏和tabBar可以根据路由动态显示隐藏

* 必须做适配，推荐vw

5 异常处理

JS/TS有可能出现异常的代码，应使用try...catch...或Reflect 

6 Vue目录结构：

```
assets
  img
  css
common        本项目公用的js文件
components  公共组件
  common    可以在别的项目用的组件
  content   只能在本项目用的组件
views       各个页面独立的组件
router
store
network
App.vue
main.js
```

7 开发前准备

# 二、常用布局和业务逻辑

# 三、项目前端性能优化

为了项目稳定，在出现错误时不停止服务，在可能出错的代码用try...catch...做异常处理。

减少DOM操作

预加载

精灵图：整合了小图标，较少服务器请求次数
代码压缩（打包）：将代码丑化，去除空格和换行

1 SEO优化

TDK：都放在head标签中

```
<title>网站名(产品名)-介绍(不要超过30个汉字)</title>
<meta name=”description” content=”网站详细说明，服务，特色，电话等”>
<meta name=”keywords” content=”英文逗号隔开的6-8个关键词，方便搜索引擎搜索”>
```

2 懒加载

图片懒加载（必用）

```
# 在图片需要在屏幕上显示时，才加载图片，优化性能。
npm install --save vue-lazyload 

//main.js
impoet VueLavyLoad from 'vue-lazyload'
Vue.use(VueLazyLoad,{
  //此对象可写可不写，用来设置加载时显示的图片，加载失败时的图片等
})


```



路由懒加载（必用）

第三方库或组件懒加载（可选）

3 精灵图，字体图标

4 防抖与节流

5 logo

```
logo优化规范：h1提高重要性，a返回首页
<div class=”logo”>
    <h1><a href=”index.html” title=”网站名称” >网站title</a></h1>
</div>
a的背景图片设置为logo，a里面的文字是为了被搜索引擎收录，但是为了美观需要隐藏：
font-size: 0; 或 text-indent: -99999px;  overflow: hidden;
```

6 favicon图标

```
favicon图标：
一般作为缩略的网站标志，显示在浏览器的地址栏或标签上。
将png的图片转换成.ico格式的图片并放到项目根目录中 https://www.bitbug.net/
引入：必须在放在head标签
<link rel=”shortcar icon” href=”xx.ico” type=”image/x-icon”>
```

# 四、项目部署到Linux服务器

node开发的后端启动后就行

vue项目需要先打包，打包得到的所有文件放到了另一个express项目的public文件夹中，并修改访问端口为80，然后npm start

## 1 环境搭建

购买云服务器，修改密码，开放端口，连接ssh

windows上的cmd：

```
ssh root@服务器ip
```

windows的cmd非常不好用，推荐自行下载cmder

连接到服务器后，配置Linux服务器的系统环境

```
//1.更新yum，并且安装常用软件
yum update
yum install -y gcc gcc-c++ cmake ncurses ncurses-devel bison

//2.node，通过编译源代码安装，
cd /usr/src 这里专门存放源代码
wget https://nodejs.org/dist/v9.3.0/node-v9.3.0.tar.gz
tar -xf node-v9.3.0.tar.gz
cd node-v9.3.0
./configure
make && make install
//编译完成，程序放在 /usr/local

//3.更新node到最新版本，n也可以款速切换node版本
npm install -g n
//不要用n latest安装最新版本，最新版本node17不稳定
n 14 安装node14
n的使用：https://segmentfault.com/a/1190000015302680

//4.python装包：
pip3 install --upgrade pip
pip3 install numpy==1.19.3
pip3 install pandas==0.23.4
pip3 install matplotlib

//5.创建公钥，并安装git：
cd ~/.ssh
ssh-keygen -t rsa -C "邮箱" 回车执行，再回车三次
cat ~/.ssh/id_rsa.pub 复制输出得到内容到github
//安装git：
yum install git
git config --global user.name "xxx"
git config --global user.email "xxx"
```

## 2 后台运行服务，开机自启

为了同时启动vue和node，且断开ssh连接不结束服务，需要将他们挂到后台中

```
yum -y install screen

screen -ls    #查看当前已创建的会话 数字.会话名 是-r 的xxx
screen -S xxx #创建xxx会话并进入，在里面 ctrl+a+d 离开当前会话并挂载后台， 输入exit则删除该会话并退出
screen -r xxx #进入xxx会话
```

## 3 Linux可能遇到的问题

（1）解决刷新后找不到网页的问题：

```
npm install --save connect-history-api-fallback
```

```
const history = require('connect-history-api-fallback')
...
app.use(history())
```

（2）windows和Linux回车符不同的问题

（3）若想用Linux命令行执行某个程序时传递参数

命令行的参数有个数和长度限制，所以参数多可以将参数保存到txt文件，读写这个文件获取参数

（4）编码问题
在上传/创建/读取/写入文件时，一定要首先考虑编码，否则遇到中文出现bug非常难发现

（5）linux中没有中文字体SimHei

所以 plt.rcParams['font.sans-serif'] = ['SimHei'] 无效，以下python代码查看现有字体

```
from matplotlib import font_manager
a = sorted([f.name for f in font_manager.fontManager.ttflist])
for i in a:
 print(i)
```

解决方法：

将win系统的 c:/windows/fonts 下的字体copy到linux，放到linux系统并情空系统字体缓存，放到matploylib文件中并修改配置文件，清空matplotlib字体缓存。

（6）python程序相关

node用exec调用python程序的问题：

exec的er回调中，服务器会停在这里，需要 return next(err)  或直接return  来继续运行服务器。

中文问题：

linux中py代码注释若有中文会报错（即使是注释也会），解决：最前面加上 #coding=utf-8
